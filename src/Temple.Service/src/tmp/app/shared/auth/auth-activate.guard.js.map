{"version":3,"sources":["app/shared/auth/auth-activate.guard.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAA2B,eAAe,CAAC,CAAA;AAC3C,uBAAiF,iBAAiB,CAAC,CAAA;AAEnG,mCAAiC,sBAAsB,CAAC,CAAA;AAGxD;IAEI,2BAAoB,gBAAkC,EAAU,MAAc;QAA1D,qBAAgB,GAAhB,gBAAgB,CAAkB;QAAU,WAAM,GAAN,MAAM,CAAQ;IAAI,CAAC;IAEnF,uCAAW,GAAX,UAAY,KAA6B,EAAE,KAA0B;QAArE,iBAoBC;QAlBG,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;YAChC,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,CAAC;QAC7C,CAAC;QAED,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,EAAE,CAAC,GAAG,CAAC,UAAA,eAAe;YAClE,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;gBAClB,MAAM,CAAC,IAAI,CAAC;YAChB,CAAC;YAED,OAAO,CAAC,GAAG,CAAC,sEAAsE,CAAC,CAAC;YAEpF,KAAI,CAAC,gBAAgB,CAAC,oBAAoB,GAAG,KAAK,CAAC,GAAG,CAAC;YAEvD,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,EAAE,SAAS,EAAE,mBAAmB,EAAE,CAAC,CAAC,CAAC;YAErE,MAAM,CAAC,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC;IACP,CAAC;IAzBL;QAAC,iBAAU,EAAE;;yBAAA;IA0Bb,wBAAC;AAAD,CAzBA,AAyBC,IAAA;AAzBY,yBAAiB,oBAyB7B,CAAA","file":"auth-activate.guard.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\r\n\r\nimport { AuthEventService } from './auth-event.service';\r\n\r\n@Injectable()\r\nexport class AuthActivateGuard implements CanActivate {\r\n\r\n    constructor(private authEventService: AuthEventService, private router: Router) { }\r\n\r\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n\r\n        if (window.location.hash) {\r\n            console.log('redirect sign in');\r\n            this.authEventService.redirectCallback();\r\n        }\r\n\r\n        return this.authEventService.isUserAuthenticated().map(isAuthenticated => {\r\n            if (isAuthenticated) {\r\n                return true;\r\n            }\r\n\r\n            console.log('You cannot navigate to this location. Please check your credentials.');\r\n\r\n            this.authEventService.unauthorizedLocation = state.url;\r\n\r\n            this.router.navigate(['/login', { autherror: 'NOT_AUTHENTICATED' }]);\r\n\r\n            return false;\r\n        });\r\n    }\r\n}\r\n"]}